---
title: "[코어 자바스크립트] 1. 데이터 타입"
layout: story
category: summary
tags: ["summary","corejs"]
---
코어 자바스크립트 1장 데이터 타입을 읽고 책 내용과 내 생각을 추가하여 정리

# 데이터 타입에 대한 관한 배경 지식
모든 데이터는 바이트 단위의 식별자, 즉 `메모리 주솟값`을 통해 서로 구분하고 연결할 수 있다.

## 데이터 타입
데이터 타입은 number, object 등과 같은 데이터의 형태를 말한다. 

## 식별자와 변수
- 변수 : 변경 가능한 데이터가 담길 수 있는 공간을 말한다.
- 식별자 : 어떤 데이터를 식별하는데 사용하는 이름 즉 변수명을 말한다.

# 데이터 타입의 종류
자바스크립트에서 데이터 타입은 크게 `기본형`과 `참조형`으로 나눌 수 있다.

## 기본형
기본형은 불변성을 띄며 값을 할당할 때 값이 담긴 주솟값을 바로 복제한다.
기본형 타입에는 number, string, boolean, null, undefined 등이 있으며 ES6에서 symbol이 추가됨.

## 참조형
참조형은 값이 담긴 주소값들로 이루어진 묶음을 가리키는 주솟값을 복제한다.
참조형 타입에는 object, array, function, date ,regexp 등과 ES6에서 Map, WeakMap, Set, WeakSet 등이 객체의 하위 분류에 속함.

# 선언과 데이터 할당
이곳에서는 변수 선언, 데이터 할당 방법이 아닌 동작 원리에대해 적을 예정이다.

기본형 데이터를 할당하는 방식과 참조형 데이터를 할당하는 방식은 약간 차이가 있다.

## 기본형 데이터를 할당
test라는 변수에 문자열 "abc"를 할당해보자
```js
let test = "abc"
```
해당 작업을 수행하게되면 컴퓨터는 어떤식으로 처리하는지 알아보자.

![r1](/assets/summary/corejs/1/1.png)

1. 변수 영역에서 빈 공간(@1003)을 확보한다.
2. 확보한 공간의 식별자를 "test"로 정한다.
3. 데이터 영역의 빈공간에 문자열(@5004) "abc"를 저장한다.
4. 변수 영역에서 test라는 식별자를 검색한다(@1003).
5. "abc"를 저장한 문자열의 주소(@5004)를 @1003 공간에 대입한다.


이번에는 기존 코드에서 문자열 "abc" 뒤에 "def"라는 문자열을 추가했을때의 처리 방식에대해 살펴보자
![r2](/assets/summary/corejs/1/2.png)
@5004 값의 내용을 "abcdef"로 변경하는게 아닌 새로 빈 영역을 할당후 그곳에 "abcdef"라는 문자열을 할당 해주고 기존 @1003공간에 새로 할당된 문자열의 주소 (@5002)를 대입하였다.

위 처럼 동작한 이유는 기존 공간에 "def"를 붙이는건 그리 어렵지 않은 연산이지만 기존 문자열 사이에 "adefbc"으로 붙이게된다면 엄청나게 많은 연산을 필요하기 떄문에 자바스크립트는 위 처럼 동작한다.

이를 통해 알 수 있는것은 변수 영역에 곧바로 값을 대입 하지않고 번거롭게 한 단계를 더 거치며 그 이유는 `데이터 변환을 자유롭게 할 수 있으며 메모리를 더욱 효율적으로 관리하기 위해서 이다.`

## 참조형 데이터 할당
참조형 데이터는 모두 가변값일거 같지만 아니다.
기본적인 성질은 가변값인 경우가 많지만 설정에 따라 변경 불가능한 경우도 있고, 아예 불변값으로 활용하는 방안도있다.

```js
let obj1 = {
  a: 1,
  b: 'bbb'
}
```

컴퓨터는 참조형 데이터를 아래처럼 처리한다.
![r3](/assets/summary/corejs/1/3.png)

1. 컴퓨터는 변수 영역의 빈공간에(@1003)을 확보하고, 그 주소의 이름을 obj1로 지정한다.
2. 임이의 데이터 영역에(@5001)에 데이터를 저장하려고 보니 여러 개의 프로퍼티로 이뤄진 데이터 그룹이다. 이그릅 내부의 프로퍼티들을 저장하기 위해 별도의 변수 영역을 마련하고 그영역의 주소를(@7001~?)를 @5001에 저장한다.
3. @7001 및 @ 7002에 각각 a와 b라는 프로퍼티 이름을 지정한다.
4. 데이터 영역에서 숫자 1을 검색한다. 검색 결과가 없으므로 @5003에 저장하고, 이주소를 @7103에 저장함, 문자열 'bbb'도 똑같이 처리한다.

기본형 데이터와 참조형 데이터의 차이는 객체의 변수(프로퍼티) 영역이 별도로 존재한다는 점이다.

## 참조형 데이터의 재할당
```js
let obj1 = {
  a: 1,
  b: 'bbb'
}
obj1.a = 5
```

컴퓨터는 참조형 데이터의 재할당 처리를 아래처럼 처리한다.
![r4](/assets/summary/corejs/1/4.png)
obj1이 바라보고있는 @5001은 변하지 않았고 기존 b가 바라보고 있는 @5004도 바뀌지않았다.
변경이 필요한 a프로퍼티가 참조하고있는 값(@5003 에서 @5002)만 바뀌게 되었다.
즉 `새로운 객체`가 만들어진 것이 아니라 기존의 객체 내부의 값만 바뀐다.

## 참조형 데이터의 프로퍼티에 참조형 데이터 할당
참조형 데이터의 프로퍼티에 다시 참조형 데이터를 할당하는 경우를 살펴보자
이런 경우를 일컬어 `중첩 객체` 라고 한다.
```js
let obj = {
  x: 3,
  arr: [3, 4, 5]
}
```

컴퓨터는 아래처럼 처리한다.
![r5](/assets/summary/corejs/1/5.png)

1. 빈 변수 영역 공간에(@1002)를 할당하고 obj로 이름을 지정한다.
2. 임이의 데이터 영역에(@5001)에 데이터를 저장하려고 보니 여러 개의 프로퍼티로 이뤄진 데이터 그룹이다. 이그릅 내부의 프로퍼티들을 저장하기 위해 별도의 변수 영역을 마련하고 그영역의 주소를(@7001~?)를 @5001에 저장한다.
3. @7001에 프로퍼티 x를, @7002에 프로퍼티 arr를 지정한다.
4. 데이터 영역에서 숫자 3을 검색하는데 없으므로 데이터 영역에 공간을 할당(@5002)해 저장하고 이주소를 @7001에 저장한다.
5. @7002에 저장할 값은 역시 데이터 그룹이다. 이 그룹 내부의 프로퍼티들을 저장하기 위해 별도의 변수 영역을 마련하고(@8001~?), 그 영역의 주소 정보를(@5005)에 저장한다.
6. 배열의 요소가 총 3개이므로 3개의 변수 공간을 확보하고 각각 인덱스를 부여한다 (0,1,2)
7. 데이터 영역에서 숫자 3를 검색하였는데 @5002에 있으므로 @8001에 저장한다.
8. 데이터 영역에서 숫자 4를 검색하였는데 없으므로 빈공간(@5003)을 할당후 4를 저장해 @8002에 @5003을 저장한다.
8. 데이터 영역에서 숫자 5를 검색하였는데 없으므로 빈공간(@5004)을 할당후 5를 저장해 @8003에 @5004을 저장한다.

## 참조형 데이터 복사
```js
let obj1 = {
  a: 1,
  b: 2
};
let obj2 = obj1;
console.log(obj1 === obj2); // true
```

참조형 데이터를 복사하면 아래처럼 같은 주소를 바라보게된다.

![r6](/assets/summary/corejs/1/6.png)

이와 같이 값을 참조 데이터를 복사하는 방식을 `얕은 복사`라 하며
이로인해 한곳에서 수정하게되면 같은주소를 참조하고있는 다른값들에게도 영향을 줄 수 있다.

```js
let obj1 = {
  a: 1,
  b: 2
};
let obj2 = obj1;
obj2.a = 5
console.log(obj2.a); // 5
console.log(obj1.a); // 5
```

![r7](/assets/summary/corejs/1/7.png)

# 얕은 복사와 깊은 복사

## 얕은 복사
얕은 복사는 바로 아래 단계의 값만 복사하는 방식이다.
얕은 복사는 중첩된 객체에서 참조형 데이터가 저장된 프로퍼티를 복사할 때 그 주솟값만 복사한다는 의미로 해당 프로퍼티에 대해 원본과 사본이 모두 동일한 참조형 데이터 주소를 가리키게 된다.

## 깊은 복사
깊은 복사는 내부의 모든 값들을 하나하나 찾아서 전부 복사하는 방법이다.

# undefined와 null
자바스크립트에서 '없음'을 나타내는 값은 두가지가 있다.
바로 `undefined`와 `null이다.

## undefined
undefined는 사용자가 명시적으로 지정할 수도 있지만 값이 존재하지 않을 때 자바스크립트 엔진이 자동으로 부여하는 경우도 있다.

자바스크립트 엔진이 undefined값을 부여할때는 아래와 같다.
1. var로 선언한 변수에 값을 대입하지 않은 경우
2. 객체 내부의 존재하지않는 프로퍼티에 접근하려고 할때
3. return 문이 없거나 호출되지 않는 함수의 실행결과

이로인해 사용자가 직접적으로 undefined값을 할당하는것은 지양해야한다.

## null
값이 비어있음을 표시할때는 undefined대신 null을 사용하자.







